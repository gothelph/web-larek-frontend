# Проектная работа "Веб-ларек"

## Стек:

```
HTML, SCSS, TS, Webpack
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура проекта

## **1. Описание данных: интерфейсы и классы с хранением данных**

### **Интерфейсы:**

Определяют форму данных и методы, которыми эти данные управляются.

- **Товары**

  - `ProductItem`: представляет товар (id, title, image, description, category, price).

- **Корзина**

  - `BasketItem`: элемент корзины (id, title, price).
  - `BasketModel`: интерфейс корзины — методы для управления и коллекция `items`.

- **Заказ**

  - `OrderInfo`: итоговые данные заказа — адрес, email, телефон, способ оплаты, список товаров, общая сумма.

- **API**

  - `ClientApi`: интерфейс клиентской части API для работы с товарами и заказами.
  - `ApiError`: структура ошибки от API.

- **Валидация**
  - `ValidatorSettings`: параметры валидации формы.
  - `Validator`: интерфейс валидатора с методами `enableValidation()` и `clearValidation()`.

---

## **2. Модели данных: реализации интерфейсов, действия и назначение**

### **Классы:**

- **Basket (реализация `BasketModel`)**

  - Хранит товары в `Map<string, BasketItem>`.
  - Методы:
    - `addItem(item: BasketItem)`: добавляет товар в корзину.
    - `removeItem(id: string)`: удаляет товар из корзины.
    - `clear()`: очищает корзину.
    - `getTotalPrice()`: рассчитывает сумму заказа.
  - Назначение: управляет состоянием корзины и предоставляет методы для её изменения.

- **ApiService (реализация `ClientApi`)**

  - Методы:
    - `getProductList()`: получает список товаров.
    - `getProductItem(id)`: получает один товар.
    - `processOrder(order)`: отправляет заказ.
  - Назначение: абстрагирует взаимодействие с сервером.

- **FormValidator (реализация `Validator`)**
  - Использует `ValidatorSettings`.
  - Методы:
    - `enableValidation()`: навешивает слушатели событий.
    - `clearValidation(form)`: сбрасывает валидацию.
  - Назначение: управляет валидацией форм.

---

## **3. Компоненты (визуальная часть)**

### **Карточки и списки товаров:**

- `ProductView`: карточка товара с обработчиком клика (`onClick(id)`).
- `DetailProductView`: детальный просмотр товара с кнопкой "в корзину".
- `ProductListView`: список карточек товаров.

### **Корзина:**

- `BasketItemView`: визуальное представление элемента корзины с `onRemove(id)`.
- `BasketView`: интерфейс отображения всей корзины и кнопки подтверждения (`onConfirm()`).

### **Формы заказа:**

- `OrderInfoFormView`: форма адреса и способа оплаты (шаг 1).
- `OrderInfoContactsFormView`: форма email и телефона (шаг 2).

### **Модальное окно:**

- `ModalView`: управление открытием/закрытием модальных окон.

### **Финальный экран:**

- `SuccessView`: отображает итоговую сумму после успешного оформления заказа.

---

## **4. Описание событий**

### **События, связанные с изменением данных (внутренние действия):**

- `addItem`: вызывается при добавлении товара в корзину.
- `removeItem`: удаляет товар из корзины.
- `clear`: очищает корзину после оформления заказа.
- `getTotalPrice`: пересчитывает общую сумму.
- `processOrder`: отправляет заказ на сервер.
- `getProductItem`, `getProductList`: получают данные товаров.

### **События – действия пользователя (UI события):**

- Клик по карточке товара (`ProductView.onClick`) → переход в детальный просмотр.
- Клик по кнопке "Добавить в корзину" (`DetailProductView.onAddToBasket`) → вызывает `BasketModel.addItem`.
- Клик по "Удалить" в корзине (`BasketItemView.onRemove`) → вызывает `BasketModel.removeItem`.
- Клик по "Оформить заказ" в корзине → запускает цепочку `OrderInfoFormView → OrderInfoContactsFormView → processOrder`.
- Клик по "Назад"/"Отмена" в формах заказа → возвращает к предыдущему шагу или закрывает модалку.
- Инпуты форм → триггерят валидацию (`FormValidator.isValid`).
- Клик по кнопке "Подтвердить" → отправка формы, переход к `SuccessView`.

---

## Структура директорий

- `src/` — исходные файлы
- `src/components/` — содержит компоненты приложения
- `src/components/base/` — базовые компоненты
- `src/images/` — графические ресурсы проекта
- `src/pages/` — страницы приложения
- `src/public/` — статические ресурсы
- `src/scss/` — стили проекта
- `src/types/` — определения типов данных
- `src/utils/` — вспомогательные утилиты
- `src/vendor/` — сторонние библиотеки

## Важные файлы:

`- src/pages/index.html` — HTML-файл главной страницы
`- src/types/index.ts` — файл с типами
`- src/index.ts` — точка входа приложения
`- src/scss/styles.scss` — корневой файл стилей
`- src/utils/constants.ts` — файл с константами
`- src/utils/utils.ts` — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
